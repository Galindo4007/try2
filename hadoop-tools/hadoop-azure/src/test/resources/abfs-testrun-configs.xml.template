<?xml version="1.0" encoding="UTF-8"?>
<configuration>

  <!--====================== IMPORTANT!! ========================-->
  <!--
      1. PLEASE PROVIDE VALUES FOR THE CONFIGS IN THIS FILE AND
         RENAME THE SAME TO "abfs-testrun-configs.xml"
      2. UPDATE runtests.sh
         A.  "fs.azure.abfs.account.name" AND "fs.azure.test.namespace.enabled"
             ARE MANDATORY WITH EVERY SCENARIO. AUTHTYPE BY DEFAULT WILL BE
             SHAREDKEY AS CONFIGURED IN THIS TEMPLATE FILE.
         B.  PLEASE ADD MORE SCENARIOS IF THE CODE CHANGE REQUIRES TESTING WITH
             DIFFERENT VARIANTS OF CONFIGS.
      3. THE SCRIPT REQUIRES THE FOLLOWING UTILITIES xmlstarlet AND pcregrep
      4. NOW THE SCRIPT CAN BE EXECUTED WITH ./runtests.sh
  -->

  <!--=============== Auth type ===============-->
  <property>
    <name>fs.azure.account.auth.type</name>
    <value>SharedKey</value>
  </property>

  <!--=============== Auth related accounts ===============-->
  <!-- This set of configs needs to be provided for all the accounts with which
   the tests needs to be ran. -->
  <property>
    <name>fs.azure.account.key.{ABFS_ACCOUNT_NAME}.dfs.core.windows.net</name>
    <value>{ACCOUNT_ACCESS_KEY}</value>
    <description>Account access key</description>
  </property>
  <property>
    <name>
      fs.azure.account.oauth.provider.type.{ABFS_ACCOUNT_NAME}.dfs.core.windows.net
    </name>
    <value>org.apache.hadoop.fs.azurebfs.oauth2.ClientCredsTokenProvider</value>
    <description>OAuth token provider implementation class</description>
  </property>
  <property>
    <name>
      fs.azure.account.oauth2.client.endpoint.{ABFS_ACCOUNT_NAME}.dfs.core.windows.net
    </name>
    <value>https://login.microsoftonline.com/{TENANTID}/oauth2/token</value>
    <description>Token end point, this can be found through Azure portal
    </description>
  </property>
  <property>
    <name>
      fs.azure.account.oauth2.client.id.{ABFS_ACCOUNT_NAME}.dfs.core.windows.net
    </name>
    <value>{client id}</value>
    <description>AAD client id.</description>
  </property>
  <property>
    <name>
      fs.azure.account.oauth2.client.secret.{ABFS_ACCOUNT_NAME}.dfs.core.windows.net
    </name>
    <value>{client secret}</value>
    <description>AAD client secret</description>
  </property>

  <!--=============== Configs for hadoop contract tests for ABFS	===============-->
  <property>
    <name>fs.contract.test.fs.abfs</name>
    <value>abfs://{CONTAINER_NAME}@{ACCOUNT_NAME}.dfs.core.windows.net</value>
  </property>
  <property>
    <name>fs.contract.test.fs.abfss</name>
    <value>abfss://{CONTAINER_NAME}@{ACCOUNT_NAME}.dfs.core.windows.net</value>
  </property>

  <!--=============== WASB Configs ===============-->
  <property>
    <name>fs.azure.wasb.account.name</name>
    <value>{WASB_ACCOUNT_NAME}.blob.core.windows.net</value>
  </property>
  <property>
    <name>fs.azure.account.key.{WASB_ACCOUNT_NAME}.blob.core.windows.net</name>
    <value>WASB account key</value>
  </property>
  <property>
    <name>fs.contract.test.fs.wasb</name>
    <value>wasb://{WASB_FILESYSTEM}@{WASB_ACCOUNT_NAME}.blob.core.windows.net
    </value>
  </property>

  <!--============= Configs for ITestAzureBlobFileSystemOauth tests	===============-->
  <property>
    <name>fs.azure.account.oauth2.contributor.client.id</name>
    <value>{Client id of SP with RBAC Storage Blob Data Contributor}</value>
  </property>
  <property>
    <name>fs.azure.account.oauth2.contributor.client.secret</name>
    <value>{Client secret of SP with RBAC Storage Blob Data Contributor}</value>
  </property>
  <property>
    <name>fs.azure.account.oauth2.reader.client.id</name>
    <value>{Client id of SP with RBAC Storage Blob Data Reader}</value>
  </property>
  <property>
    <name>fs.azure.account.oauth2.reader.client.secret</name>
    <value>{Client secret of SP with RBAC Storage Blob Data Reader}</value>
  </property>

  <!--========== Check access related configs ===========-->
  <property>
    <name>fs.azure.account.test.oauth2.client.id</name>
    <value>{client id}</value>
    <description>AAD client id.</description>
  </property>
  <property>
    <name>fs.azure.account.test.oauth2.client.secret</name>
    <value>{Client secret}</value>
  </property>
  <property>
    <name>fs.azure.check.access.testuser.guid</name>
    <value>{The guid of the service principal}</value>
    <description>We are setting the ACLs for this guid to test checkaccess.
      How to find service principal's guid: Try to get the token with the SP.
      decode the token using jwt decoder use the oid field from the decoded
      json string as guid.
    </description>
  </property>
  <property>
    <name>fs.azure.enable.check.access</name>
    <value>true</value>
    <description>Change this to false to disable check access
      feature
    </description>
  </property>

  <!--========== Append blob related configs ===========-->
  <property>
    <name>fs.azure.test.appendblob.enabled</name>
    <value>false</value>
    <description>The tests will be running under the assumption
      that append blob is enabled. The root directory and contract
      test root directory will be part of the append blob
      directories.
    </description>
  </property>

</configuration>
